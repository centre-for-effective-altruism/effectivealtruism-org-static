script(src='/scripts/LAB.min.js')
script#app-script(src='/scripts/app.min.js' type="application/x-no-execution" async)
script.
    window.appScript = document.getElementById('app-script').src;
    console.log(window.appScript);
    window.$LAB = window.$LAB || undefined;
    (function($LAB){
        if(!$LAB) return;
        // labjs script loader
        $LAB
        .queueScript("https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js")
        // uncomment if running optimizely experiments:
        /*.queueScript("https://cdn.optimizely.com/js/XXXXXX.js")
        .queueWait(function(){
            // kill optimizely if it hasn't loaded within a few seconds
            function optimizelyTimeout() {
                window.optimizely = window.optimizely|| [];
                if (!window.optimizely.data) {
                    window.optimizely.push("timeout");
                }
            }
            setTimeout(optimizelyTimeout, 2000);
        })*/
        .queueScript("https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js")
        .queueWait(function(){
            function webfontStatus(status){
                (function($){
                    if (status){
                        $(function(){
                            $(document).trigger('WebFont',status)
                        })
                    }
                })(jQuery)
            }
            WebFont.load({
                timeout: 1000,
                classes: !window.wfInactive,
                google: {
                    families: ['Merriweather:300,300i,700,700i','Raleway:500,500i']
                },
                loading: function(){
                    clearTimeout(window.wfl);
                    webfontStatus('loading');
                },
                active: function() {
                    webfontStatus('active');
                },
                inactive: function() {
                    webfontStatus('inactive');
                }

            });
        })
        .queueScript(window.appScript || '/scripts/app.min.js')
        // enqueue anything that's been requested with loadScript() elsewhere in the body
        var s;
        for (var i = 0; i < d.length; i++) {
            if(typeof d[i] === 'function'){
                $LAB.queueWait(d[i])
            } else {
                s = d[i].substr(d[i].length-4) === '.js' || d[i].substr(0,4) === "http" ? d[i] : '/scripts/includes/'+d[i]+'.min.js';
                $LAB.queueScript(s)
            }
        };
        $LAB.queueWait(function(){
            (function($){
                $(document).trigger('jsready');
            })(jQuery);
        })
        $LAB.runQueue();
    })(window.$LAB);